# دليل ربط الفرونت إند بالباك إند - مشروع رؤى

## ✅ تم إصلاح وتجهيز المشروع بنجاح!

تم فحص وإصلاح جميع جوانب الربط بين الفرونت إند والباك إند في المشروع. النظام يعمل بشكل صحيح 100%.

## 🔧 المكونات المفحوصة والمُصلحة:

### 1. الباك إند (Laravel)
- ✅ **قاعدة البيانات**: متصلة وجاهزة (جميع الـ migrations تم تشغيلها)
- ✅ **API Endpoints**: تعمل بشكل مثالي
  - `/api/auth/register` - التسجيل
  - `/api/auth/login` - تسجيل الدخول  
  - `/api/auth/logout` - تسجيل الخروج
  - `/api/user` - معلومات المستخدم المسجل
- ✅ **AuthController**: يتعامل مع التسجيل والدخول بشكل صحيح
- ✅ **User Model**: معرف بـ primary key = user_id
- ✅ **CORS Configuration**: يسمح للفرونت إند بالوصول
- ✅ **Laravel Sanctum**: للمصادقة عبر API tokens

### 2. الفرونت إند (React)
- ✅ **صفحة تسجيل الدخول**: تستخدم API الحقيقي
- ✅ **صفحة التسجيل**: تستخدم API الحقيقي  
- ✅ **AuthContext**: يدير حالة المصادقة
- ✅ **axios Configuration**: متصل بالباك إند
- ✅ **Routes**: جميع الطرق معرفة بشكل صحيح
- ✅ **Error Handling**: يتعامل مع الأخطاء بشكل مناسب

### 3. التوجيه حسب الأدوار
- ✅ **Admin**: يتم توجيهه إلى `/admin/overview`
- ✅ **Parent**: يتم توجيهه إلى `/dashboard/parent`
- ✅ **Supervisor**: يتم توجيهه إلى `/dashboard/supervisor`
- ✅ **School Manager**: يتم توجيهه إلى `/dashboard/school`

## 🚀 كيفية تشغيل المشروع:

### الخطوة 1: تشغيل الباك إند (Laravel)
```bash
cd C:\laragon\www\ruaa_project
php artisan serve --host=127.0.0.1 --port=8000
```

### الخطوة 2: تشغيل الفرونت إند (React)
```bash
cd C:\laragon\www\ruaa_project\frontend\my-project-main
npm start
```

## 🧪 اختبار النظام:

### يدوياً عبر المتصفح:
1. اذهب إلى `http://localhost:3000`
2. سيتم توجيهك تلقائياً إلى صفحة تسجيل الدخول
3. يمكنك إنشاء حساب جديد أو تسجيل الدخول

### عبر API مباشرة:
```bash
# اختبار شامل للنظام
php test_integration.php
```

## 📊 أمثلة على البيانات:

### للتسجيل:
```json
{
  "name": "اسم المستخدم",
  "email": "user@example.com",
  "password": "password123",
  "confirmPassword": "password123"
}
```

### لتسجيل الدخول:
```json
{
  "email": "user@example.com", 
  "password": "password123"
}
```

## 🔄 تدفق العمل:

1. **التسجيل**: المستخدم يملأ النموذج → البيانات ترسل للـ API → يتم إنشاء حساب في قاعدة البيانات
2. **تسجيل الدخول**: المستخدم يدخل البيانات → API يتحقق من قاعدة البيانات → يرجع token و user data
3. **التوجيه**: حسب role المستخدم يتم توجيهه للصفحة المناسبة
4. **الحفظ**: البيانات تُحفظ في localStorage للجلسات المستقبلية

## 🔑 الميزات الرئيسية:

- ✅ **مصادقة آمنة** باستخدام Laravel Sanctum
- ✅ **إدارة الأدوار** (Admin, Parent, Supervisor, School Manager)
- ✅ **تذكر المستخدم** (Remember Me)
- ✅ **رسائل تأكيد** باللغة العربية
- ✅ **معالجة الأخطاء** الشاملة
- ✅ **واجهة مستخدم** متجاوبة ومرنة

## 🛠️ الإعدادات المهمة:

### ملف .env للفرونت إند:
```
REACT_APP_API_URL=http://127.0.0.1:8000
```

### ملف config/cors.php للباك إند:
```php
'allowed_origins' => ['*'],
'allowed_methods' => ['*'],
'allowed_headers' => ['*'],
```

## ⚠️ ملاحظات مهمة:

1. **تأكد من تشغيل Laravel server قبل React**
2. **تأكد من أن قاعدة البيانات متصلة**
3. **البورت 8000 يجب أن يكون متاحاً لـ Laravel**
4. **البورت 3000 يجب أن يكون متاحاً لـ React**

## ✅ تأكيد النجاح:

تم اختبار النظام بالكامل وجميع المكونات تعمل بشكل مثالي:
- ✅ التسجيل يعمل ويحفظ في قاعدة البيانات
- ✅ تسجيل الدخول يعمل ويرجع token صحيح
- ✅ التوجيه يعمل حسب دور المستخدم
- ✅ الواجهات تتواصل مع قاعدة البيانات بنجاح

---
*آخر تحديث: 11 سبتمبر 2025*
