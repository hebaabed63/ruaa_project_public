# ๐ ุฏููู ุชูุนูู ุงูููู ุงูุดุฎุตู ูุชุบููุฑ ูููุฉ ุงููุฑูุฑ - Dashboard ุงููุดุฑููู

## โ ุงูุชุญุฏูุซุงุช ุงูููุชููุฉ

ุชู ุชูุนูู ุงูููู ุงูุดุฎุตู ุจุงููุงูู ูู Dashboard ุงููุดุฑููู ูุน ุฅุถุงูุฉ ููุฒุฉ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ.

---

## ๐ ูุง ุชู ุฅูุฌุงุฒู

### 1. **Backend - Laravel**

#### โ ุฅุถุงูุฉ API ูุชุบููุฑ ูููุฉ ุงููุฑูุฑ

**ุงูููู:** `app/Http/Controllers/Api/Supervisor/SupervisorDashboardController.php`

```php
/**
 * Change supervisor password
 * ุชุบููุฑ ูููุฉ ูุฑูุฑ ุงููุดุฑู
 */
public function changePassword(Request $request)
{
    // ุงูุชุญูู ูู ุงูุฏูุฑ
    if ($user->role !== 1) { ... }
    
    // Validation
    $validatedData = $request->validate([
        'current_password' => 'required|string',
        'new_password' => 'required|string|min:8|confirmed',
    ]);
    
    // ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ
    if (!\\Hash::check($current_password, $user->password)) { ... }
    
    // ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ
    $user->password = \\Hash::make($new_password);
    $user->save();
}
```

**ุงููููุฒุงุช:**
- โ ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ
- โ Validation ุดุงูู (8 ุฃุญุฑู ุนูู ุงูุฃูู)
- โ ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ (confirmed)
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจู
- โ ุญูุงูุฉ ูู ุงููุตูู ุบูุฑ ุงููุตุฑุญ

---

### 2. **API Routes**

**ุงูููู:** `routes/api.php`

```php
Route::prefix('supervisor')->middleware('auth:sanctum')->group(function () {
    // ... existing routes
    
    // ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
    Route::post('/profile/change-password', [SupervisorDashboardController::class, 'changePassword']);
});
```

**ุงูู Endpoint:**
```
POST /api/supervisor/profile/change-password
```

**ุงููุฏุฎูุงุช ุงููุทููุจุฉ:**
```json
{
  "current_password": "ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ",
  "new_password": "ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ",
  "new_password_confirmation": "ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ"
}
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ:**
```json
{
  "success": true,
  "message": "ุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ"
}
```

**ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:**
```json
// ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ ุฎุงุทุฆุฉ
{
  "success": false,
  "message": "ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ ุบูุฑ ุตุญูุญุฉ"
}

// Validation errors
{
  "success": false,
  "message": "ูุฑุฌู ุงูุชุญูู ูู ุงูุจูุงูุงุช",
  "errors": {
    "new_password": ["ูููุฉ ุงููุฑูุฑ ูุฌุจ ุฃู ุชููู 8 ุฃุญุฑู ุนูู ุงูุฃูู"],
    "new_password_confirmation": ["ูููุฉ ุงููุฑูุฑ ุบูุฑ ูุชุทุงุจูุฉ"]
  }
}
```

---

### 3. **Frontend Services**

**ุงูููู:** `frontend/my-project-main/src/pages/dashboard/Supervisors/services/supervisorApi.js`

```javascript
/**
 * Change supervisor password
 * @param {Object} passwordData - Object containing:
 *   - current_password: string
 *   - new_password: string
 *   - new_password_confirmation: string
 * @returns {Promise<Object>} Success response
 */
export const changeSupervisorPassword = async (passwordData) => {
  try {
    const response = await api.post('/supervisor/profile/change-password', passwordData);
    return response.data;
  } catch (error) {
    console.error('Error changing password:', error);
    throw error;
  }
};
```

**ุงูุงุณุชุฎุฏุงู:**
```javascript
import { changeSupervisorPassword } from '../services/supervisorApi';

const handleChangePassword = async () => {
  try {
    const result = await changeSupervisorPassword({
      current_password: 'oldPassword123',
      new_password: 'newPassword123',
      new_password_confirmation: 'newPassword123'
    });
    
    console.log('ุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ');
  } catch (error) {
    console.error('ุฎุทุฃ ูู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ:', error);
  }
};
```

---

### 4. **React Component - ChangePasswordModal**

**ุงูููู:** `frontend/my-project-main/src/pages/dashboard/Supervisors/components/ChangePasswordModal.jsx`

**ุงููููุฒุงุช:**
- โ Modal ุฌููู ูุน animations
- โ 3 ุญููู: ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉุ ุงูุฌุฏูุฏุฉุ ุงูุชุฃููุฏ
- โ ุฒุฑ ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ ููู ุญูู
- โ Validation ูู ุงูููุช ุงููุนูู
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ ุฑุณุงูุฉ ูุฌุงุญ ุนูุฏ ุงูุชุบููุฑ
- โ Loading state ุฃุซูุงุก ุงูุญูุธ
- โ ุฅุบูุงู ุชููุงุฆู ุจุนุฏ ุงููุฌุงุญ

**ูุงุฌูุฉ ุงููุณุชุฎุฏู:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ          โ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ              โ
โ  [******************]         ๐    โ
โ                                     โ
โ  ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ              โ
โ  [******************]         ๐    โ
โ  (8 ุฃุญุฑู ุนูู ุงูุฃูู)                โ
โ                                     โ
โ  ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ        โ
โ  [******************]         ๐    โ
โ                                     โ
โ  [ุฅูุบุงุก]  [๐ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### 5. **ProfilePage Updates**

**ุงูููู:** `frontend/my-project-main/src/pages/dashboard/Supervisors/pages/ProfilePage.jsx`

**ุงูุชุญุฏูุซุงุช:**

1. **Import ChangePasswordModal:**
```javascript
import ChangePasswordModal from '../components/ChangePasswordModal';
import { FaLock } from 'react-icons/fa';
```

2. **State ููู Modal:**
```javascript
const [passwordModalOpen, setPasswordModalOpen] = useState(false);
```

3. **ุฒุฑ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ:**
```javascript
<motion.button
  onClick={() => setPasswordModalOpen(true)}
  className="px-4 py-2 rounded-lg flex items-center bg-gray-600 hover:bg-gray-700 text-white"
>
  <FaLock className="text-white" />
  <span>ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</span>
</motion.button>
```

4. **Modal Component:**
```javascript
<ChangePasswordModal 
  isOpen={passwordModalOpen} 
  onClose={() => setPasswordModalOpen(false)} 
/>
```

---

## ๐ฏ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏู ุงูููุงุฆู:

1. **ุงูุฏุฎูู ููููู ุงูุดุฎุตู:**
   - ุงุถุบุท ุนูู ุตูุฑุชู ูู Header
   - ุงุฎุชุฑ "ุงูููู ุงูุดุฎุตู"
   - ุณูุชู ูููู ุฅูู `/dashboard/supervisor/profile`

2. **ุชุบููุฑ ุงูุจูุงูุงุช:**
   - ุนุฏู ุงูุงุณูุ ุงูุจุฑูุฏ ุงูุฅููุชุฑูููุ ุงููุงุชูุ ุงูุนููุงู
   - ุงุถุบุท "ุญูุธ ุงูุชุนุฏููุงุช"
   - ุณุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ
   - ุณุชูุนูุณ ุงูุชุบููุฑุงุช ูู Header ููุฑุงู

3. **ุชุบููุฑ ุงูุตูุฑุฉ:**
   - ุงุถุบุท ุนูู ุฃููููุฉ ุงููุงููุฑุง ุนูู ุงูุตูุฑุฉ
   - ุงุฎุชุฑ ุตูุฑุฉ ุฌุฏูุฏุฉ (JPG/PNGุ ุฃูู ูู 2MB)
   - ุณุชุธูุฑ ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ ููุฑุงู

4. **ุชุบููุฑ ูููุฉ ุงููุฑูุฑ:**
   - ุงุถุบุท ุฒุฑ "ุชุบููุฑ ูููุฉ ุงููุฑูุฑ"
   - ุณูุธูุฑ Modal
   - ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ
   - ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ (8 ุฃุญุฑู ุนูู ุงูุฃูู)
   - ุฃูุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
   - ุงุถุบุท "ุชุบููุฑ ูููุฉ ุงููุฑูุฑ"
   - ุณุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ ููุบูู ุงูููุฏุงู ุชููุงุฆูุงู

---

## ๐ ุงูุฃูุงู

### Backend Security:
- โ **Authentication:** ุฌููุน Routes ูุญููุฉ ุจู `auth:sanctum`
- โ **Authorization:** ุงูุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูุดุฑู (role = 1)
- โ **Password Verification:** ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ ูุจู ุงูุชุบููุฑ
- โ **Password Hashing:** ุชุดููุฑ ูููุฉ ุงููุฑูุฑ ุจู `Hash::make()`
- โ **Validation:** ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช
- โ **Confirmation:** ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ

### Frontend Security:
- โ **Client-side Validation:** ุงูุชุญูู ูุจู ุงูุฅุฑุณุงู
- โ **Error Handling:** ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุขูู
- โ **No Plain Text:** ุนุฏู ุนุฑุถ ูููุงุช ุงููุฑูุฑ ุจุดูู ุงูุชุฑุงุถู
- โ **Toggle Visibility:** ุฅููุงููุฉ ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ

---

## ๐ Validation Rules

### ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ:
- โ ูุทููุจุฉ
- โ ูุฌุจ ุฃู ุชููู ุตุญูุญุฉ

### ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ:
- โ ูุทููุจุฉ
- โ 8 ุฃุญุฑู ุนูู ุงูุฃูู
- โ ูุฌุจ ุฃู ุชุชุทุงุจู ูุน ุงูุชุฃููุฏ

### ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:
- โ ูุทููุจ
- โ ุตูุบุฉ email ุตุญูุญุฉ
- โ ูุฑูุฏ (ูุง ูููู ุงุณุชุฎุฏุงู email ููุฌูุฏ ููุณุชุฎุฏู ุขุฎุฑ)

### ุงูุงุณู:
- โ ูุทููุจ
- โ 3 ุฃุญุฑู ุนูู ุงูุฃูู
- โ 50 ุญุฑู ูุญุฏ ุฃูุตู

### ุฑูู ุงููุงุชู:
- โ 10-15 ุฑูู
- โ ูููู ุฃู ูุจุฏุฃ ุจู +

### ุงูุนููุงู:
- โ 5 ุฃุญุฑู ุนูู ุงูุฃูู
- โ 200 ุญุฑู ูุญุฏ ุฃูุตู

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ:

```bash
# 1. ุชุณุฌูู ุงูุฏุฎูู
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"supervisor@ruaa.com","password":"password"}'

# ุงุญูุธ ุงูู token ูู ุงูุงุณุชุฌุงุจุฉ

# 2. ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
curl -X POST http://localhost:8000/api/supervisor/profile/change-password \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "current_password": "password",
    "new_password": "newpassword123",
    "new_password_confirmation": "newpassword123"
  }'
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุชููุนุฉ:**
```json
{
  "success": true,
  "message": "ุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ"
}
```

---

## ๐จ ุงูุชุตููู

### Header (Navigation):
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ฑ ูุธุงู ุงููุดุฑููู    ๐ ๐ค ูุญูุฏ ุงููุดุฑู  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ (ุนูุฏ ุงูุถุบุท ุนูู ุงูุตูุฑุฉ)
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ค ูุญูุฏ ุงููุดุฑู        โ
โ  supervisor@ruaa.com   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ค ุงูููู ุงูุดุฎุตู  โ   โ  โ ููุฌู ุฅูู ProfilePage
โ  โ๏ธ  ุงูุฅุนุฏุงุฏุงุช    โ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ช ุชุณุฌูู ุงูุฎุฑูุฌ       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ProfilePage:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุฃููุงูุ ุฃุณุชุงุฐ/ุฉ ูุญูุฏ ุงููุดุฑู!            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                          โ
โ   [๐ท ุตูุฑุฉ]    ูุญูุฏ ุงููุดุฑู             โ
โ                ูุดุฑู                      โ
โ                [๐ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ]   โ
โ                [๐พ ุญูุธ ุงูุชุนุฏููุงุช]       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุงูุงุณู ุงููุงูู:  [ูุญูุฏ ุงููุดุฑู]          โ
โ  ุงูุจุฑูุฏ:        [supervisor@ruaa.com]   โ
โ  ุงููุงุชู:        [+966501234567]         โ
โ  ุงูุนููุงู:       [ุงูุฑูุงุถ]                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ูุนูููุงุช ุงููุฏุงุฑุณ ุงูุชู ุชูุดุฑู ุนูููุง   โ
โ  [ูุฏุฑุณุฉ 1] [ูุฏุฑุณุฉ 2] [ูุฏุฑุณุฉ 3]         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ Checklist ุงูููุงุฆู

### Backend
- [โ] API endpoint ูุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- [โ] Validation ุดุงูู
- [โ] ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ
- [โ] ุชุดููุฑ ูููุฉ ุงููุฑูุฑ
- [โ] ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- [โ] ุญูุงูุฉ Routes

### Frontend
- [โ] ChangePasswordModal component
- [โ] ProfilePage ูุญุฏุซุฉ
- [โ] ุฒุฑ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- [โ] ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ
- [โ] Validation ูู ุงูููุช ุงููุนูู
- [โ] ุฑุณุงุฆู ูุฌุงุญ ูุฎุทุฃ
- [โ] Loading states
- [โ] Animations smooth

### Integration
- [โ] Header ููุฌู ููููู ุงูุดุฎุตู
- [โ] ุงูุงุณู ูุธูุฑ ูู Header
- [โ] ุงูุตูุฑุฉ ุชุธูุฑ ูู Header
- [โ] ุงูุชุบููุฑุงุช ุชูุนูุณ ููุฑุงู
- [โ] ุฌููุน ุงูุญููู ูุงุจูุฉ ููุชุนุฏูู

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

โ **ุงูููู ุงูุดุฎุตู ุงูุขู:**
- ูุนุฑุถ ุงูุงุณู ุงูุญูููู ูู ุฌููุน ุงูุตูุญุงุช (Header)
- ูููู ุชุนุฏูู ุฌููุน ุงูุจูุงูุงุช (ุงูุงุณูุ ุงูุจุฑูุฏุ ุงููุงุชูุ ุงูุนููุงู)
- ูููู ุชุบููุฑ ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ
- ูููู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจุฃูุงู
- ุฌููุน ุงูุชุญุฏูุซุงุช ุชูุนูุณ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฑุงู
- ุงูุชููู ููููู ุงูุดุฎุตู ูู Header ูุนูู ุจุดูู ุตุญูุญ

**ุงูุญุงูุฉ: ููุชูู 100%! ๐**

---

## ๐ ูุตุงุฆุญ ูููุณุชุฎุฏููู

### ูููุฉ ุงููุฑูุฑ ุงููููุฉ:
- ุงุณุชุฎุฏู 8 ุฃุญุฑู ุนูู ุงูุฃูู
- ุงุฎูุท ุฃุญุฑู ูุจูุฑุฉ ูุตุบูุฑุฉ
- ุฃุถู ุฃุฑูุงู ูุฑููุฒ
- ูุง ุชุณุชุฎุฏู ูุนูููุงุช ุดุฎุตูุฉ

### ุงูุฃูุงู:
- ุบููุฑ ูููุฉ ุงููุฑูุฑ ุจุดูู ุฏูุฑู
- ูุง ุชุดุงุฑู ูููุฉ ุงููุฑูุฑ ูุน ุฃุญุฏ
- ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฎุฑูุฌ ุจุนุฏ ุงูุงูุชูุงุก

---

*ุขุฎุฑ ุชุญุฏูุซ: ุงูุขู*  
*ุงูุฅุตุฏุงุฑ: 1.0 - Profile & Password Complete*
